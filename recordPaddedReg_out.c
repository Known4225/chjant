#include"seagateType.h"
void recordPaddedReg(seagate*selfp,int reference1,int reference2,int operation){if(reference1==-1){printf("This should never happen.\n");return;}seagate self=*selfp;char*ref1name=self.registers->data[reference1].s;int size1=self.registers->data[reference1+1].i;char*ref2name=self.registers->data[reference2].s;int size2=self.registers->data[reference2+1].i;char*newName;int scaleFactor;int shrinkSize;int savedComp;int maxUp;int preMoveHeight;int smallerReg=reference1;int biggerReg=reference2;int sizeDifference=size2-size1;int smallerSize=size1;int biggerSize=size2;if(size1>size2){smallerSize=size2;biggerSize=size1;smallerReg=reference2;biggerReg=reference1;sizeDifference=size1-size2;}if(reference1==reference2){char tempLookup[strlen(ref1name)+5];memcpy(tempLookup,ref1name,strlen(ref1name));memcpy(tempLookup+strlen(ref1name),"COPY",5);int checkForCopy=checkNamespace(&self,tempLookup);if(checkForCopy==-1){self.registers->data[reference1+2].i+=1;list_append(self.registers,(unitype)strdup(tempLookup),'s');list_append(self.registers,(unitype)size1,'i');list_append(self.registers,(unitype)0,'i');list_append(self.registers,(unitype)list_init(),'r');list_append(self.deleteStack,(unitype)strdup(tempLookup),'s');list_append(self.deleteStack,(unitype)(int)(self.registers->length-4),'i');for(int i=0;i<size1;i++){list_append(self.registers->data[self.registers->length-1].r,(unitype)(int)self.components->length,'i');list_append(self.components,(unitype)"POWER",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"POWER",'s')+1],'i');list_append(self.inpComp,self.registers->data[reference1+3].r->data[i],'i');list_append(self.inpComp,(unitype)0,'i');list_append(self.wiring,self.registers->data[reference1+3].r->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');}reference2=self.registers->length-4;}else{reference2=checkForCopy;}}list_t*wireTemp=list_init();switch(operation){case 0:;if(size1!=size2){printf("Warning: bit mismatch assigning %s (%d bits) to %s (%d bits)\n",self.registers->data[reference2].s,self.registers->data[reference2+1].i,self.registers->data[reference1].s,self.registers->data[reference1+1].i);}self.registers->data[reference1+2]=self.registers->data[reference2+2];for(int i=0;i<smallerSize;i++){self.registers->data[reference1+3].r->data[i]=self.registers->data[reference2+3].r->data[i];}break;case 1:;self.registers->data[reference1+2].i+=1;newName=malloc(strlen(ref1name)+4);memcpy(newName,ref1name,strlen(ref1name));memcpy(newName+strlen(ref1name),"NOT",4);self.opResult=newName;list_append(self.registers,(unitype)newName,'s');list_append(self.registers,(unitype)size1,'i');list_append(self.registers,(unitype)0,'i');list_append(self.registers,(unitype)list_init(),'r');list_append(self.deleteStack,(unitype)strdup(newName),'s');list_append(self.deleteStack,(unitype)(int)(self.registers->length-4),'i');for(int i=0;i<size1;i++){list_append(self.registers->data[self.registers->length-1].r,(unitype)(int)self.components->length,'i');list_append(self.components,(unitype)"NOT",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"NOT",'s')+1],'i');list_append(self.inpComp,self.registers->data[reference1+3].r->data[i],'i');list_append(self.inpComp,(unitype)0,'i');list_append(self.wiring,self.registers->data[reference1+3].r->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');}break;case 2:self.registers->data[reference1+2].i+=1;newName=malloc(strlen(ref1name)+strlen(ref2name)+4);memcpy(newName,ref1name,strlen(ref1name));memcpy(newName+strlen(ref1name),"AND",3);memcpy(newName+strlen(ref1name)+3,ref2name,strlen(ref2name)+1);self.opResult=newName;list_append(self.registers,(unitype)newName,'s');list_append(self.registers,(unitype)smallerSize,'i');list_append(self.registers,(unitype)0,'i');list_append(self.registers,(unitype)list_init(),'r');list_append(self.deleteStack,(unitype)strdup(newName),'s');list_append(self.deleteStack,(unitype)(int)(self.registers->length-4),'i');for(int i=0;i<smallerSize;i++){list_append(self.registers->data[self.registers->length-1].r,(unitype)(int)self.components->length,'i');list_append(self.components,(unitype)"AND",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"AND",'s')+1],'i');list_append(self.inpComp,self.registers->data[reference1+3].r->data[i],'i');list_append(self.inpComp,self.registers->data[reference2+3].r->data[i],'i');list_append(self.wiring,self.registers->data[reference1+3].r->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.wiring,self.registers->data[reference2+3].r->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');}break;case 3:;self.registers->data[reference1+2].i+=1;newName=malloc(strlen(ref1name)+strlen(ref2name)+3);memcpy(newName,ref1name,strlen(ref1name));memcpy(newName+strlen(ref1name),"OR",2);memcpy(newName+strlen(ref1name)+2,ref2name,strlen(ref2name)+1);self.opResult=newName;list_append(self.registers,(unitype)newName,'s');list_append(self.registers,(unitype)smallerSize,'i');list_append(self.registers,(unitype)0,'i');list_append(self.registers,(unitype)list_init(),'r');list_append(self.deleteStack,(unitype)strdup(newName),'s');list_append(self.deleteStack,(unitype)(int)(self.registers->length-4),'i');for(int i=0;i<smallerSize;i++){list_append(self.registers->data[self.registers->length-1].r,(unitype)(int)self.components->length,'i');list_append(self.components,(unitype)"OR",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"OR",'s')+1],'i');list_append(self.inpComp,self.registers->data[reference1+3].r->data[i],'i');list_append(self.inpComp,self.registers->data[reference2+3].r->data[i],'i');list_append(self.wiring,self.registers->data[reference1+3].r->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.wiring,self.registers->data[reference2+3].r->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');}break;case 4:;self.registers->data[reference1+2].i+=1;newName=malloc(strlen(ref1name)+strlen(ref2name)+4);memcpy(newName,ref1name,strlen(ref1name));memcpy(newName+strlen(ref1name),"XOR",3);memcpy(newName+strlen(ref1name)+3,ref2name,strlen(ref2name)+1);self.opResult=newName;list_append(self.registers,(unitype)newName,'s');list_append(self.registers,(unitype)smallerSize,'i');list_append(self.registers,(unitype)0,'i');list_append(self.registers,(unitype)list_init(),'r');list_append(self.deleteStack,(unitype)strdup(newName),'s');list_append(self.deleteStack,(unitype)(int)(self.registers->length-4),'i');for(int i=0;i<smallerSize;i++){list_append(self.registers->data[self.registers->length-1].r,(unitype)(int)self.components->length,'i');list_append(self.components,(unitype)"XOR",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"XOR",'s')+1],'i');list_append(self.inpComp,self.registers->data[reference1+3].r->data[i],'i');list_append(self.inpComp,self.registers->data[reference2+3].r->data[i],'i');list_append(self.wiring,self.registers->data[reference1+3].r->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.wiring,(unitype)self.registers->data[reference2+3].r->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');}break;case 5:;newName=malloc(strlen(ref1name)+2);memcpy(newName,ref1name,strlen(ref1name));memcpy(newName+strlen(ref1name),"N",2);list_append(self.registers,(unitype)newName,'s');self.opResult=newName;list_append(self.registers,(unitype)size1,'i');list_append(self.registers,(unitype)0,'i');list_append(self.registers,(unitype)list_init(),'r');list_append(self.deleteStack,(unitype)strdup(newName),'s');list_append(self.deleteStack,(unitype)(int)(self.registers->length-4),'i');list_clear(wireTemp);for(int i=0;i<size1;i++){list_append(wireTemp,self.registers->data[reference1+3].r->data[i],'i');}self.registers->data[reference1+2].i+=1;scaleFactor=2;while(scaleFactor<size1+1){for(int i=0;i<size1;i+=scaleFactor){list_append(self.components,(unitype)"OR",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"OR",'s')+1],'i');list_append(self.inpComp,wireTemp->data[i],'i');list_append(self.inpComp,wireTemp->data[i+scaleFactor/2],'i');list_append(self.wiring,wireTemp->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.wiring,wireTemp->data[i+scaleFactor/2],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');wireTemp->data[i].i=(int)(self.components->length-1);}self.registers->data[reference1+2].i+=1;scaleFactor*=2;}list_append(self.registers->data[self.registers->length-1].r,(unitype)(int)(self.components->length-1),'i');for(int i=1;i<size1;i++){list_append(self.components,(unitype)"POWER",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*(self.registers->data[reference1+2].i-1)),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"POWER",'s')+1],'i');list_append(self.inpComp,(unitype)0,'i');list_append(self.inpComp,(unitype)0,'i');list_append(self.registers->data[self.registers->length-1].r,(unitype)(int)(self.components->length-1),'i');}break;case 6:;newName=malloc(strlen(ref1name)+strlen(ref2name)+2);memcpy(newName,ref1name,strlen(ref1name));memcpy(newName+strlen(ref1name),"A",2);memcpy(newName+strlen(ref1name)+1,ref2name,strlen(ref2name)+1);self.opResult=newName;list_append(self.registers,(unitype)newName,'s');list_append(self.registers,(unitype)smallerSize,'i');list_append(self.registers,(unitype)0,'i');list_append(self.registers,(unitype)list_init(),'r');list_append(self.deleteStack,(unitype)strdup(newName),'s');list_append(self.deleteStack,(unitype)(int)(self.registers->length-4),'i');list_clear(wireTemp);for(int i=0;i<size1;i++){list_append(wireTemp,self.registers->data[reference1+3].r->data[i],'i');}self.registers->data[reference1+2].i+=1;scaleFactor=2;while(scaleFactor<size1+1){for(int i=0;i<size1;i+=scaleFactor){list_append(self.components,(unitype)"OR",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"OR",'s')+1],'i');list_append(self.inpComp,wireTemp->data[i],'i');list_append(self.inpComp,wireTemp->data[i+scaleFactor/2],'i');list_append(self.wiring,wireTemp->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.wiring,wireTemp->data[i+scaleFactor/2],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');wireTemp->data[i].i=(int)(self.components->length-1);}self.registers->data[reference1+2].i+=1;scaleFactor*=2;}savedComp=self.components->length-1;list_clear(wireTemp);for(int i=0;i<size2;i++){list_append(wireTemp,self.registers->data[reference2+3].r->data[i],'i');}self.registers->data[reference2+2].i+=1;scaleFactor=2;while(scaleFactor<size2+1){for(int i=0;i<size2;i+=scaleFactor){list_append(self.components,(unitype)"OR",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference2+3].r->data[0].i*3-2].d-self.compDistX*i),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference2+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference2+2].i),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"OR",'s')+1],'i');list_append(self.inpComp,wireTemp->data[i],'i');list_append(self.inpComp,wireTemp->data[i+scaleFactor/2],'i');list_append(self.wiring,wireTemp->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.wiring,wireTemp->data[i+scaleFactor/2],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');wireTemp->data[i].i=(int)(self.components->length-1);}self.registers->data[reference2+2].i+=1;scaleFactor*=2;}list_append(self.components,(unitype)"AND",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*0),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"AND",'s')+1],'i');list_append(self.inpComp,(unitype)savedComp,'i');list_append(self.inpComp,(unitype)(int)(self.components->length-2),'i');list_append(self.wiring,(unitype)savedComp,'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.wiring,(unitype)(int)(self.components->length-2),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.registers->data[self.registers->length-1].r,(unitype)(int)(self.components->length-1),'i');self.registers->data[reference1+2].i+=1;for(int i=1;i<smallerSize;i++){list_append(self.components,(unitype)"POWER",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*(self.registers->data[reference1+2].i-1)),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"POWER",'s')+1],'i');list_append(self.inpComp,(unitype)0,'i');list_append(self.inpComp,(unitype)0,'i');list_append(self.registers->data[self.registers->length-1].r,(unitype)(int)(self.components->length-1),'i');}break;case 7:;newName=malloc(strlen(ref1name)+strlen(ref2name)+2);memcpy(newName,ref1name,strlen(ref1name));memcpy(newName+strlen(ref1name),"O",2);memcpy(newName+strlen(ref1name)+1,ref2name,strlen(ref2name)+1);self.opResult=newName;list_append(self.registers,(unitype)newName,'s');list_append(self.registers,(unitype)smallerSize,'i');list_append(self.registers,(unitype)0,'i');list_append(self.registers,(unitype)list_init(),'r');list_append(self.deleteStack,(unitype)strdup(newName),'s');list_append(self.deleteStack,(unitype)(int)(self.registers->length-4),'i');list_clear(wireTemp);for(int i=0;i<size1;i++){list_append(wireTemp,self.registers->data[reference1+3].r->data[i],'i');}self.registers->data[reference1+2].i+=1;scaleFactor=2;while(scaleFactor<size1+1){for(int i=0;i<size1;i+=scaleFactor){list_append(self.components,(unitype)"OR",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"OR",'s')+1],'i');list_append(self.inpComp,wireTemp->data[i],'i');list_append(self.inpComp,wireTemp->data[i+scaleFactor/2],'i');list_append(self.wiring,wireTemp->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.wiring,wireTemp->data[i+scaleFactor/2],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');wireTemp->data[i].i=(int)(self.components->length-1);}self.registers->data[reference1+2].i+=1;scaleFactor*=2;}savedComp=self.components->length-1;list_clear(wireTemp);for(int i=0;i<size2;i++){list_append(wireTemp,self.registers->data[reference2+3].r->data[i],'i');}self.registers->data[reference2+2].i+=1;scaleFactor=2;while(scaleFactor<size2+1){for(int i=0;i<size2;i+=scaleFactor){list_append(self.components,(unitype)"OR",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference2+3].r->data[0].i*3-2].d-self.compDistX*i),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference2+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference2+2].i),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"OR",'s')+1],'i');list_append(self.inpComp,wireTemp->data[i],'i');list_append(self.inpComp,wireTemp->data[i+scaleFactor/2],'i');list_append(self.wiring,wireTemp->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.wiring,wireTemp->data[i+scaleFactor/2],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');wireTemp->data[i].i=(int)(self.components->length-1);}self.registers->data[reference2+2].i+=1;scaleFactor*=2;}list_append(self.components,(unitype)"OR",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*0),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"OR",'s')+1],'i');list_append(self.inpComp,(unitype)savedComp,'i');list_append(self.inpComp,(unitype)(int)(self.components->length-2),'i');list_append(self.wiring,(unitype)savedComp,'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.wiring,(unitype)(int)(self.components->length-2),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.registers->data[self.registers->length-1].r,(unitype)(int)(self.components->length-1),'i');self.registers->data[reference1+2].i+=1;for(int i=1;i<smallerSize;i++){list_append(self.components,(unitype)"POWER",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*(self.registers->data[reference1+2].i-1)),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"POWER",'s')+1],'i');list_append(self.inpComp,(unitype)0,'i');list_append(self.inpComp,(unitype)0,'i');list_append(self.registers->data[self.registers->length-1].r,(unitype)(int)(self.components->length-1),'i');}break;case 8:;preMoveHeight=self.registers->data[reference1+2].i;self.registers->data[reference1+2].i+=1;newName=malloc(strlen(ref1name)+strlen(ref2name)+2);memcpy(newName,ref1name,strlen(ref1name));memcpy(newName+strlen(ref1name),"X",1);memcpy(newName+strlen(ref1name)+1,ref2name,strlen(ref2name)+1);self.opResult=newName;list_append(self.registers,(unitype)newName,'s');list_append(self.registers,(unitype)smallerSize,'i');list_append(self.registers,(unitype)0,'i');list_append(self.registers,(unitype)list_init(),'r');list_append(self.deleteStack,(unitype)strdup(newName),'s');list_append(self.deleteStack,(unitype)(int)(self.registers->length-4),'i');list_clear(wireTemp);for(int i=0;i<smallerSize;i++){list_append(self.components,(unitype)"XOR",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"XOR",'s')+1],'i');list_append(self.inpComp,self.registers->data[reference1+3].r->data[i],'i');list_append(self.inpComp,self.registers->data[reference2+3].r->data[i],'i');list_append(self.wiring,self.registers->data[reference1+3].r->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.wiring,(unitype)self.registers->data[reference2+3].r->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(wireTemp,(unitype)(int)(self.components->length-1),'i');}self.registers->data[reference1+2].i+=1;scaleFactor=2;while(scaleFactor<smallerSize+1){for(int i=0;i<smallerSize;i+=scaleFactor){list_append(self.components,(unitype)"OR",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"OR",'s')+1],'i');list_append(self.inpComp,wireTemp->data[i],'i');list_append(self.inpComp,wireTemp->data[i+scaleFactor/2],'i');list_append(self.wiring,wireTemp->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.wiring,wireTemp->data[i+scaleFactor/2],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');wireTemp->data[i].i=(int)(self.components->length-1);}self.registers->data[reference1+2].i+=1;scaleFactor*=2;}if(size1!=size2){maxUp=self.registers->data[reference1+2].i;self.registers->data[reference1+2].i=preMoveHeight;savedComp=self.components->length-1;list_clear(wireTemp);for(int i=0;i<smallerSize;i++){list_append(wireTemp,self.registers->data[biggerReg+3].r->data[i],'i');}for(int i=smallerSize;i<biggerSize;i++){list_append(wireTemp,self.registers->data[biggerReg+3].r->data[i],'i');}self.registers->data[biggerReg+2].i+=1;shrinkSize=biggerSize-smallerSize;scaleFactor=2;while(shrinkSize>0){for(int i=smallerSize;i<biggerSize;i+=scaleFactor){list_append(self.components,(unitype)"OR",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[biggerReg+3].r->data[0].i*3-2].d-self.compDistX*i),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[biggerReg+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[biggerReg+2].i),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"OR",'s')+1],'i');list_append(self.inpComp,wireTemp->data[i],'i');if(i+scaleFactor/2<wireTemp->length)list_append(self.inpComp,wireTemp->data[i+scaleFactor/2],'i');else list_append(self.inpComp,(unitype)0,'i');list_append(self.wiring,wireTemp->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');if(i+scaleFactor/2<wireTemp->length){list_append(self.wiring,wireTemp->data[i+scaleFactor/2],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');}wireTemp->data[i].i=(int)(self.components->length-1);}self.registers->data[biggerReg+2].i+=1;scaleFactor*=2;shrinkSize/=2;}list_append(self.components,(unitype)"OR",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*0),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"OR",'s')+1],'i');list_append(self.inpComp,(unitype)savedComp,'i');list_append(self.inpComp,(unitype)(int)(self.components->length-2),'i');list_append(self.wiring,(unitype)savedComp,'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.wiring,(unitype)(int)(self.components->length-2),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');self.registers->data[reference1+2].i+=1;}list_append(self.registers->data[self.registers->length-1].r,(unitype)(int)(self.components->length-1),'i');for(int i=1;i<smallerSize;i++){list_append(self.components,(unitype)"POWER",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*(self.registers->data[reference1+2].i-1)),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"POWER",'s')+1],'i');list_append(self.inpComp,(unitype)0,'i');list_append(self.inpComp,(unitype)0,'i');list_append(self.registers->data[self.registers->length-1].r,(unitype)(int)(self.components->length-1),'i');}if(maxUp>self.registers->data[reference1+2].i){self.registers->data[reference1+2].i=maxUp;}break;case 9:;break;case 10:;break;case 11:;self.registers->data[reference1+2].i+=1;newName=malloc(strlen(ref1name)+4);memcpy(newName,ref1name,strlen(ref1name));memcpy(newName+strlen(ref1name),"INC",4);list_append(self.registers,(unitype)newName,'s');self.opResult=newName;list_append(self.registers,(unitype)size1,'i');list_append(self.registers,(unitype)0.5,'i');list_append(self.registers,(unitype)list_init(),'r');list_append(self.deleteStack,(unitype)strdup(newName),'s');list_append(self.deleteStack,(unitype)(int)(self.registers->length-4),'i');for(int i=0;i<size1;i++){list_append(self.components,(unitype)"XOR",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i+self.compDistX/4),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"XOR",'s')+1],'i');list_append(self.inpComp,self.registers->data[reference1+3].r->data[i],'i');if(i==0)list_append(self.inpComp,(unitype)0,'i');else list_append(self.inpComp,(unitype)(unitype)(int)(self.components->length-2),'i');list_append(self.wiring,self.registers->data[reference1+3].r->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');if(i==0){savedComp=self.components->length-1;}else{list_append(self.wiring,(unitype)(int)(self.components->length-2),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');}list_append(self.registers->data[self.registers->length-1].r,(unitype)(int)(self.components->length-1),'i');if(i!=size1-1){list_append(self.components,(unitype)"AND",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i-self.compDistX/4),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i+self.compDistY/2),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"AND",'s')+1],'i');list_append(self.inpComp,self.registers->data[reference1+3].r->data[i],'i');if(i==0)list_append(self.inpComp,(unitype)0,'i');else list_append(self.inpComp,(unitype)(unitype)(int)(self.components->length-3),'i');list_append(self.wiring,self.registers->data[reference1+3].r->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');if(i!=0){list_append(self.wiring,(unitype)(int)(self.components->length-3),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');}}}list_append(self.components,(unitype)"POWER",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*0+self.compDistX),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*(self.registers->data[reference1+2].i-1)),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)1,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"POWER",'s')+1],'i');list_append(self.inpComp,(unitype)savedComp,'i');list_append(self.inpComp,(unitype)(savedComp+1),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)savedComp,'i');list_append(self.wiring,(unitype)0,'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)(savedComp+1),'i');list_append(self.wiring,(unitype)0,'i');self.inpComp->data[savedComp*3]=(unitype)(int)(self.components->length-1);self.inpComp->data[(savedComp+1)*3]=(unitype)(int)(self.components->length-1);self.registers->data[reference1+2].i+=0.5;break;case 12:;self.registers->data[reference1+2].i+=1;newName=malloc(strlen(ref1name)+4);memcpy(newName,ref1name,strlen(ref1name));memcpy(newName+strlen(ref1name),"DEC",4);list_append(self.registers,(unitype)newName,'s');self.opResult=newName;list_append(self.registers,(unitype)size1,'i');list_append(self.registers,(unitype)1,'i');list_append(self.registers,(unitype)list_init(),'r');list_append(self.deleteStack,(unitype)strdup(newName),'s');list_append(self.deleteStack,(unitype)(int)(self.registers->length-4),'i');for(int i=0;i<size1;i++){list_append(self.components,(unitype)"XOR",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i+self.compDistX/4),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"XOR",'s')+1],'i');list_append(self.inpComp,self.registers->data[reference1+3].r->data[i],'i');if(i==0)list_append(self.inpComp,(unitype)0,'i');else list_append(self.inpComp,(unitype)(unitype)(int)(self.components->length-2),'i');list_append(self.wiring,self.registers->data[reference1+3].r->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');if(i==0){savedComp=self.components->length-1;}else{list_append(self.wiring,(unitype)(int)(self.components->length-2),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');}list_append(self.registers->data[self.registers->length-1].r,(unitype)(int)(self.components->length-1),'i');if(i!=size1-1){list_append(self.components,(unitype)"NOT",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i-self.compDistX/4),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i+self.compDistY/2),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"NOT",'s')+1],'i');list_append(self.inpComp,self.registers->data[reference1+3].r->data[i],'i');list_append(self.inpComp,(unitype)0,'i');list_append(self.wiring,self.registers->data[reference1+3].r->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.components,(unitype)"AND",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i+self.compDistX/4),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i+self.compDistY),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"AND",'s')+1],'i');list_append(self.inpComp,(unitype)(int)(self.components->length-2),'i');if(i==0)list_append(self.inpComp,(unitype)0,'i');else list_append(self.inpComp,(unitype)(unitype)(int)(self.components->length-4),'i');list_append(self.wiring,(unitype)(int)(self.components->length-2),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');if(i!=0){list_append(self.wiring,(unitype)(int)(self.components->length-4),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');}}}list_append(self.components,(unitype)"POWER",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*0+self.compDistX),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*(self.registers->data[reference1+2].i-1)),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)1,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"POWER",'s')+1],'i');list_append(self.inpComp,(unitype)savedComp,'i');list_append(self.inpComp,(unitype)(savedComp+1),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)savedComp,'i');list_append(self.wiring,(unitype)0,'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)(savedComp+2),'i');list_append(self.wiring,(unitype)0,'i');self.inpComp->data[savedComp*3]=(unitype)(int)(self.components->length-1);self.inpComp->data[(savedComp+2)*3]=(unitype)(int)(self.components->length-1);self.registers->data[reference1+2].i+=1;break;case 13:;self.registers->data[reference1+2].i+=1;newName=malloc(strlen(ref1name)+4);memcpy(newName,ref1name,strlen(ref1name));memcpy(newName+strlen(ref1name),"NEG",4);list_append(self.registers,(unitype)newName,'s');self.opResult=newName;list_append(self.registers,(unitype)size1,'i');list_append(self.registers,(unitype)1,'i');list_append(self.registers,(unitype)list_init(),'r');list_append(self.deleteStack,(unitype)strdup(newName),'s');list_append(self.deleteStack,(unitype)(int)(self.registers->length-4),'i');for(int i=0;i<size1;i++){list_append(self.components,(unitype)"XOR",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i+self.compDistX/4),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"XOR",'s')+1],'i');list_append(self.inpComp,self.registers->data[reference1+3].r->data[i],'i');if(i==0)list_append(self.inpComp,(unitype)0,'i');else list_append(self.inpComp,(unitype)(unitype)(int)(self.components->length-2),'i');list_append(self.wiring,self.registers->data[reference1+3].r->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');if(i==0){savedComp=self.components->length-1;}else{list_append(self.wiring,(unitype)(int)(self.components->length-2),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');}list_append(self.components,(unitype)"NOT",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i-self.compDistX/4),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i+self.compDistY*1.7),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"NOT",'s')+1],'i');list_append(self.inpComp,(unitype)(int)(self.components->length-2),'i');list_append(self.inpComp,(unitype)0,'i');list_append(self.wiring,(unitype)(int)(self.components->length-2),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.registers->data[self.registers->length-1].r,(unitype)(int)(self.components->length-1),'i');if(i!=size1-1){list_append(self.components,(unitype)"NOT",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i-self.compDistX/4),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i+self.compDistY/2),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"NOT",'s')+1],'i');list_append(self.inpComp,self.registers->data[reference1+3].r->data[i],'i');list_append(self.inpComp,(unitype)0,'i');list_append(self.wiring,self.registers->data[reference1+3].r->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.components,(unitype)"AND",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i+self.compDistX/4),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i+self.compDistY),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"AND",'s')+1],'i');list_append(self.inpComp,(unitype)(int)(self.components->length-2),'i');if(i==0)list_append(self.inpComp,(unitype)0,'i');else list_append(self.inpComp,(unitype)(int)(self.components->length-5),'i');list_append(self.wiring,(unitype)(int)(self.components->length-2),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');if(i!=0){list_append(self.wiring,(unitype)(int)(self.components->length-5),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');}}}list_append(self.components,(unitype)"POWER",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*0+self.compDistX),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*(self.registers->data[reference1+2].i-1)),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)1,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"POWER",'s')+1],'i');list_append(self.inpComp,(unitype)savedComp,'i');list_append(self.inpComp,(unitype)(savedComp+1),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)savedComp,'i');list_append(self.wiring,(unitype)0,'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)(savedComp+3),'i');list_append(self.wiring,(unitype)0,'i');self.inpComp->data[savedComp*3]=(unitype)(int)(self.components->length-1);self.inpComp->data[(savedComp+3)*3]=(unitype)(int)(self.components->length-1);self.registers->data[reference1+2].i+=2;break;case 14:;preMoveHeight=self.registers->data[reference1+2].i;self.registers->data[reference1+2].i+=1;newName=malloc(strlen(ref1name)+strlen(ref2name)+2);memcpy(newName,ref1name,strlen(ref1name));memcpy(newName+strlen(ref1name),"XN",2);memcpy(newName+strlen(ref1name)+2,ref2name,strlen(ref2name)+1);self.opResult=newName;list_append(self.registers,(unitype)newName,'s');list_append(self.registers,(unitype)smallerSize,'i');list_append(self.registers,(unitype)0,'i');list_append(self.registers,(unitype)list_init(),'r');list_append(self.deleteStack,(unitype)strdup(newName),'s');list_append(self.deleteStack,(unitype)(int)(self.registers->length-4),'i');list_clear(wireTemp);for(int i=0;i<smallerSize;i++){list_append(self.components,(unitype)"XOR",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"XOR",'s')+1],'i');list_append(self.inpComp,self.registers->data[reference1+3].r->data[i],'i');list_append(self.inpComp,self.registers->data[reference2+3].r->data[i],'i');list_append(self.wiring,self.registers->data[reference1+3].r->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.wiring,(unitype)self.registers->data[reference2+3].r->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(wireTemp,(unitype)(int)(self.components->length-1),'i');}self.registers->data[reference1+2].i+=1;scaleFactor=2;while(scaleFactor<smallerSize+1){for(int i=0;i<smallerSize;i+=scaleFactor){list_append(self.components,(unitype)"OR",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"OR",'s')+1],'i');list_append(self.inpComp,wireTemp->data[i],'i');list_append(self.inpComp,wireTemp->data[i+scaleFactor/2],'i');list_append(self.wiring,wireTemp->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.wiring,wireTemp->data[i+scaleFactor/2],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');wireTemp->data[i].i=(int)(self.components->length-1);}self.registers->data[reference1+2].i+=1;scaleFactor*=2;}if(size1!=size2){maxUp=self.registers->data[reference1+2].i;self.registers->data[reference1+2].i=preMoveHeight;savedComp=self.components->length-1;list_clear(wireTemp);for(int i=0;i<smallerSize;i++){list_append(wireTemp,self.registers->data[biggerReg+3].r->data[i],'i');}for(int i=smallerSize;i<biggerSize;i++){list_append(wireTemp,self.registers->data[biggerReg+3].r->data[i],'i');}self.registers->data[biggerReg+2].i+=1;shrinkSize=biggerSize-smallerSize;scaleFactor=2;while(shrinkSize>0){for(int i=smallerSize;i<biggerSize;i+=scaleFactor){list_append(self.components,(unitype)"OR",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[biggerReg+3].r->data[0].i*3-2].d-self.compDistX*i),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[biggerReg+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[biggerReg+2].i),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"OR",'s')+1],'i');list_append(self.inpComp,wireTemp->data[i],'i');if(i+scaleFactor/2<wireTemp->length)list_append(self.inpComp,wireTemp->data[i+scaleFactor/2],'i');else list_append(self.inpComp,(unitype)0,'i');list_append(self.wiring,wireTemp->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');if(i+scaleFactor/2<wireTemp->length){list_append(self.wiring,wireTemp->data[i+scaleFactor/2],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');}wireTemp->data[i].i=(int)(self.components->length-1);}self.registers->data[biggerReg+2].i+=1;scaleFactor*=2;shrinkSize/=2;}list_append(self.components,(unitype)"OR",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*0),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"OR",'s')+1],'i');list_append(self.inpComp,(unitype)savedComp,'i');list_append(self.inpComp,(unitype)(int)(self.components->length-2),'i');list_append(self.wiring,(unitype)savedComp,'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.wiring,(unitype)(int)(self.components->length-2),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');self.registers->data[reference1+2].i+=1;}list_append(self.components,(unitype)"NOT",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*0),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"NOT",'s')+1],'i');list_append(self.inpComp,(unitype)(int)(self.components->length-2),'i');list_append(self.inpComp,(unitype)0,'i');list_append(self.wiring,(unitype)(int)(self.components->length-2),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.registers->data[self.registers->length-1].r,(unitype)(int)(self.components->length-1),'i');self.registers->data[reference1+2].i+=1;for(int i=1;i<smallerSize;i++){list_append(self.components,(unitype)"POWER",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*(self.registers->data[reference1+2].i-1)),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"POWER",'s')+1],'i');list_append(self.inpComp,(unitype)0,'i');list_append(self.inpComp,(unitype)0,'i');list_append(self.registers->data[self.registers->length-1].r,(unitype)(int)(self.components->length-1),'i');}if(maxUp>self.registers->data[reference1+2].i){self.registers->data[reference1+2].i=maxUp;}break;case 15:;if(size1!=size2){printf("Warning: bit mismatch piping %s (%d bits) to %s (%d bits)\n",self.registers->data[reference2].s,self.registers->data[reference2+1].i,self.registers->data[reference1].s,self.registers->data[reference1+1].i);}for(int i=0;i<smallerSize;i++){self.inpComp->data[self.registers->data[reference1+3].r->data[i].i*3-1].i=self.registers->data[reference2+3].r->data[i].i;list_append(self.wiring,(unitype)self.registers->data[reference2+3].r->data[i],'i');list_append(self.wiring,(unitype)self.registers->data[reference1+3].r->data[i],'i');list_append(self.wiring,(unitype)0,'i');}break;case 21:;self.registers->data[reference1+2].i+=1;newName=malloc(strlen(ref1name)+strlen(ref2name)+5);memcpy(newName,ref1name,strlen(ref1name));memcpy(newName+strlen(ref1name),"PLUS",4);memcpy(newName+strlen(ref1name)+4,ref2name,strlen(ref2name)+1);self.opResult=newName;list_append(self.registers,(unitype)newName,'s');list_append(self.registers,(unitype)smallerSize,'i');list_append(self.registers,(unitype)2,'i');list_append(self.registers,(unitype)list_init(),'r');list_append(self.deleteStack,(unitype)strdup(newName),'s');list_append(self.deleteStack,(unitype)(int)(self.registers->length-4),'i');for(int i=0;i<smallerSize;i++){list_append(self.components,(unitype)"XOR",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i+self.compDistX/4),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"XOR",'s')+1],'i');list_append(self.inpComp,self.registers->data[reference1+3].r->data[i],'i');list_append(self.inpComp,self.registers->data[reference2+3].r->data[i],'i');list_append(self.wiring,self.registers->data[reference1+3].r->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.wiring,self.registers->data[reference2+3].r->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');if(i==0)list_append(self.registers->data[self.registers->length-1].r,(unitype)(int)(self.components->length-1),'i');list_append(self.components,(unitype)"AND",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i-self.compDistX/4),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i+self.compDistY/2),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"AND",'s')+1],'i');list_append(self.inpComp,self.registers->data[reference1+3].r->data[i],'i');list_append(self.inpComp,self.registers->data[reference2+3].r->data[i],'i');list_append(self.wiring,self.registers->data[reference1+3].r->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.wiring,self.registers->data[reference2+3].r->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');if(i!=0){list_append(self.components,(unitype)"AND",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i+self.compDistX/4),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i+self.compDistY*1.65),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"AND",'s')+1],'i');list_append(self.inpComp,(unitype)(int)(self.components->length-3),'i');list_append(self.inpComp,(unitype)(int)(self.components->length-4),'i');list_append(self.wiring,(unitype)(int)(self.components->length-3),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.wiring,(unitype)(int)(self.components->length-4),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.components,(unitype)"XOR",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i-self.compDistX/4),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i+self.compDistY*1.15),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"XOR",'s')+1],'i');list_append(self.inpComp,(unitype)(int)(self.components->length-4),'i');list_append(self.inpComp,(unitype)(int)(self.components->length-5),'i');list_append(self.wiring,(unitype)(int)(self.components->length-4),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.wiring,(unitype)(int)(self.components->length-5),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.registers->data[self.registers->length-1].r,(unitype)(int)(self.components->length-1),'i');list_append(self.components,(unitype)"OR",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i+self.compDistX/4),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i+self.compDistY*2.2),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"OR",'s')+1],'i');list_append(self.inpComp,(unitype)(int)(self.components->length-4),'i');list_append(self.inpComp,(unitype)(int)(self.components->length-3),'i');list_append(self.wiring,(unitype)(int)(self.components->length-4),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.wiring,(unitype)(int)(self.components->length-3),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');}}for(int i=smallerSize;i<biggerSize;i++){list_append(self.components,(unitype)"XOR",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i+self.compDistX/4),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"XOR",'s')+1],'i');list_append(self.inpComp,self.registers->data[biggerReg+3].r->data[i],'i');list_append(self.inpComp,(unitype)(int)(self.components->length-2),'i');list_append(self.wiring,self.registers->data[biggerReg+3].r->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.wiring,(unitype)(int)(self.components->length-2),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.registers->data[self.registers->length-1].r,(unitype)(int)(self.components->length-1),'i');list_append(self.components,(unitype)"AND",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i-self.compDistX/4),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i+self.compDistY/2),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"AND",'s')+1],'i');list_append(self.inpComp,self.registers->data[biggerReg+3].r->data[i],'i');list_append(self.inpComp,(unitype)(int)(self.components->length-3),'i');list_append(self.wiring,self.registers->data[biggerReg+3].r->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.wiring,(unitype)(int)(self.components->length-3),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');}self.registers->data[reference1+2].i+=3.2;break;case 22:;self.registers->data[reference1+2].i+=1;newName=malloc(strlen(ref1name)+strlen(ref2name)+6);memcpy(newName,ref1name,strlen(ref1name));memcpy(newName+strlen(ref1name),"MINUS",5);memcpy(newName+strlen(ref1name)+5,ref2name,strlen(ref2name)+1);self.opResult=newName;list_append(self.registers,(unitype)newName,'s');list_append(self.registers,(unitype)smallerSize,'i');list_append(self.registers,(unitype)3,'i');list_append(self.registers,(unitype)list_init(),'r');list_append(self.deleteStack,(unitype)strdup(newName),'s');list_append(self.deleteStack,(unitype)(int)(self.registers->length-4),'i');for(int i=0;i<smallerSize;i++){list_append(self.components,(unitype)"XOR",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i+self.compDistX/4),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"XOR",'s')+1],'i');list_append(self.inpComp,self.registers->data[reference1+3].r->data[i],'i');list_append(self.inpComp,self.registers->data[reference2+3].r->data[i],'i');list_append(self.wiring,self.registers->data[reference1+3].r->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.wiring,self.registers->data[reference2+3].r->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');if(i==0)list_append(self.registers->data[self.registers->length-1].r,(unitype)(int)(self.components->length-1),'i');list_append(self.components,(unitype)"NOT",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i-self.compDistX/4),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i+self.compDistY/2),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"NOT",'s')+1],'i');list_append(self.inpComp,self.registers->data[reference1+3].r->data[i],'i');list_append(self.inpComp,(unitype)0,'i');list_append(self.wiring,self.registers->data[reference1+3].r->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.components,(unitype)"AND",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i-self.compDistX/4),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i+self.compDistY*1.5),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"AND",'s')+1],'i');list_append(self.inpComp,self.registers->data[reference2+3].r->data[i],'i');list_append(self.inpComp,(unitype)(int)(self.components->length-2),'i');list_append(self.wiring,self.registers->data[reference2+3].r->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.wiring,(unitype)(int)(self.components->length-2),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');if(i!=0){list_append(self.components,(unitype)"NOT",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i+self.compDistX/4),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i+self.compDistY*1),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"NOT",'s')+1],'i');list_append(self.inpComp,(unitype)(int)(self.components->length-4),'i');list_append(self.inpComp,(unitype)0,'i');list_append(self.wiring,(unitype)(int)(self.components->length-4),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.components,(unitype)"AND",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i+self.compDistX/4),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i+self.compDistY*2.65),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"AND",'s')+1],'i');list_append(self.inpComp,(unitype)(int)(self.components->length-2),'i');list_append(self.inpComp,(unitype)(int)(self.components->length-6),'i');list_append(self.wiring,(unitype)(int)(self.components->length-2),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.wiring,(unitype)(int)(self.components->length-6),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.components,(unitype)"XOR",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i-self.compDistX/4),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i+self.compDistY*2.15),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"XOR",'s')+1],'i');list_append(self.inpComp,(unitype)(int)(self.components->length-6),'i');list_append(self.inpComp,(unitype)(int)(self.components->length-7),'i');list_append(self.wiring,(unitype)(int)(self.components->length-6),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.wiring,(unitype)(int)(self.components->length-7),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.registers->data[self.registers->length-1].r,(unitype)(int)(self.components->length-1),'i');list_append(self.components,(unitype)"OR",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i+self.compDistX/4),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i+self.compDistY*3.2),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"OR",'s')+1],'i');list_append(self.inpComp,(unitype)(int)(self.components->length-5),'i');list_append(self.inpComp,(unitype)(int)(self.components->length-3),'i');list_append(self.wiring,(unitype)(int)(self.components->length-5),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.wiring,(unitype)(int)(self.components->length-3),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');}}for(int i=smallerSize;i<biggerSize;i++){list_append(self.components,(unitype)"XOR",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i+self.compDistX/4),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i+self.compDistY),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"XOR",'s')+1],'i');list_append(self.inpComp,self.registers->data[biggerReg+3].r->data[i],'i');list_append(self.inpComp,(unitype)(int)(self.components->length-2),'i');list_append(self.wiring,self.registers->data[biggerReg+3].r->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.wiring,(unitype)(int)(self.components->length-2),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.registers->data[self.registers->length-1].r,(unitype)(int)(self.components->length-1),'i');if(biggerReg==reference1){list_append(self.components,(unitype)"NOT",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i-self.compDistX/4),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i+self.compDistY/2),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"NOT",'s')+1],'i');list_append(self.inpComp,self.registers->data[biggerReg+3].r->data[i],'i');list_append(self.inpComp,(unitype)0,'i');list_append(self.wiring,self.registers->data[biggerReg+3].r->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');}list_append(self.components,(unitype)"AND",'s');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-2].d-self.compDistX*i+self.compDistX/4),'d');list_append(self.positions,(unitype)(self.positions->data[self.registers->data[reference1+3].r->data[0].i*3-1].d+self.compDistY*self.registers->data[reference1+2].i+self.compDistY*1),'d');list_append(self.positions,(unitype)0,'d');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.io,(unitype)0,'i');list_append(self.inpComp,self.compSlots->data[list_find(self.compSlots,(unitype)"AND",'s')+1],'i');if(biggerReg==reference1)list_append(self.inpComp,(unitype)(int)(self.components->length-2),'i');else list_append(self.inpComp,self.registers->data[biggerReg+3].r->data[i],'i');list_append(self.inpComp,(unitype)(int)(self.components->length-4),'i');if(biggerReg==reference1)list_append(self.wiring,(unitype)(int)(self.components->length-2),'i');else list_append(self.wiring,self.registers->data[biggerReg+3].r->data[i],'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');list_append(self.wiring,(unitype)(int)(self.components->length-4),'i');list_append(self.wiring,(unitype)(int)(self.components->length-1),'i');list_append(self.wiring,(unitype)0,'i');}self.registers->data[reference1+2].i+=4.2;break;case 23:;break;case 24:;break;case 25:;break;case 30:;if(list_count(self.userNamespace,(unitype)ref1name,'s')==0){printf("Syntax error: %s must be a modifiable lvalue\n",ref1name);exit(-1);}self.opResult=ref2name;}list_free(wireTemp);*selfp=self;}